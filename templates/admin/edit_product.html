{% extends "base.html" %}
{% block link %}
<link rel="stylesheet" href="{{ url_for('static', filename='CSS/add.css') }} ">
{% endblock %}
{% block content %}
<div class="form-container">
    <h1 class="form-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h1>

    <form action="/admin/edit_product/{{ product.id }}" method="POST" enctype="multipart/form-data" class="form-contact">
        <div class="form-group">
            <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</label>
            <input type="text" id="name" name="name" class="form-input"
                   placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" value="{{ product.name }}" required>
        </div>

        <div class="form-group">
            <label for="price">–°—Ç–æ–∏–º–æ—Å—Ç—å</label>
            <input type="text" id="price" name="price" class="form-input"
                   placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ —Ä—É–±–ª—è—Ö" value="{{ product.price }}" required>
        </div>

        <div class="form-group">
            <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</label>
            <div class="file-input-container">
                <label for="file-input" class="file-input-label">
                    üìÅ –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                </label>
                <input id="file-input" type="file" name="file" accept="image/*">
            </div>
            <div class="file-name" id="file-name">
                {% if product.image %}
                –¢–µ–∫—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: {{ product.image }}
                {% else %}
                –§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω
                {% endif %}
            </div>
            {% if product.image %}
            <div class="current-image">
                <p>–¢–µ–∫—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:</p>
                <img src="{{ product.image }}"
                     alt="{{ product.name }}" class="product-image-preview">
            </div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="categories">–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞</label>
            <div class="select-container">
                <select id="categories" name="category" class="form-input" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                    <option value="Clothes" {% if product.category =='Clothes' %}selected{% endif %}>üëï –û–¥–µ–∂–¥–∞</option>
                    <option value="Sport" {% if product.category =='Sport' %}selected{% endif %}>‚öΩ –°–ø–æ—Ä—Ç</option>
                    <option value="Household" {% if product.category =='Household' %}selected{% endif %}>üè† –¢–æ–≤–∞—Ä—ã –¥–ª—è –¥–æ–º–∞</option>
                    <option value="Electronics" {% if product.category =='Electronics' %}selected{% endif %}>üì± –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞</option>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</label>
            <textarea id="description" name="description" class="form-input"
                      placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏—Ç–µ —Ç–æ–≤–∞—Ä, –µ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞..."
                      rows="6">{{ product.description }}</textarea>
        </div>

        <div class="form-actions">
            <button type="submit" class="submit-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            <a href="/admin" class="cancel-btn">–û—Ç–º–µ–Ω–∞</a>
        </div>
    </form>
</div>
<script>
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
    document.getElementById('file-input').addEventListener('change', function(e) {
        const fileName = e.target.files[0] ? e.target.files[0].name : '–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω';
        document.getElementById('file-name').textContent = fileName;
    });

    // –î–æ–±–∞–≤–ª—è–µ–º –º–∞—Å–∫—É –¥–ª—è —Ü–µ–Ω—ã (—Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞)
    document.getElementById('price').addEventListener('input', function(e) {
        this.value = this.value.replace(/[^\d]/g, '');
    });

    // –ü–ª–∞–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º
    const form = document.querySelector('.form-contact');
    form.addEventListener('submit', function(e) {
        const inputs = form.querySelectorAll('input[required], select[required]');
        let isValid = true;

        inputs.forEach(input => {
            if (!input.value.trim()) {
                input.style.borderColor = '#e74c3c';
                isValid = false;
            } else {
                input.style.borderColor = '#27ae60';
            }
        });

        if (!isValid) {
            e.preventDefault();
            alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
        }
    });

    // –°–±—Ä–æ—Å —Ü–≤–µ—Ç–∞ –≥—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
    const formInputs = document.querySelectorAll('.form-input');
    formInputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.style.borderColor = '#667eea';
        });
    });
</script>
{% endblock %}